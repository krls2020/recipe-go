zerops:
  - setup: api
    build:
      base: go@1
      buildCommands:
        - |
          cd src
          go build -o app ./...
      deploy:
        - ./src/~/app
    run:
      base: go@1
      start: ./app
      ports:
        - port: 8080
          httpSupport: true
      envVariables:
        DB_NAME: db
        DB_HOST: db
        DB_PORT: 5432
        DB_USER: db
        DB_PASS: ${db_password}
      healthCheck:
        httpGet:
          port: 8080
          path: /status